(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{1730:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(7876),s=r(4232),n=r(9099),i=r(5611),l=r(9848);let c=e=>{let{initialData:t,onCancel:r}=e,c=(0,n.useRouter)(),[d,o]=(0,s.useState)(!1),[u,h]=(0,s.useState)({name:(null==t?void 0:t.name)||"",type:(null==t?void 0:t.type)||"",description:(null==t?void 0:t.description)||""}),p=e=>{let{name:t,value:r}=e.target;h(e=>({...e,[t]:r}))},m=async e=>{e.preventDefault(),o(!0);try{t?(await i.clientDataService.updateFieldType(t.id,u),l.oR.success("Field type updated successfully")):(await i.clientDataService.createFieldType(u),l.oR.success("Field type created successfully")),c.push("/admin")}catch(e){console.error("Error saving field type:",e),l.oR.error(t?"Failed to update field type":"Failed to create field type")}finally{o(!1)}};return(0,a.jsxs)("form",{onSubmit:m,className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-300 mb-2",children:"Name"}),(0,a.jsx)("input",{type:"text",name:"name",value:u.name,onChange:p,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-300 mb-2",children:"Type"}),(0,a.jsx)("input",{type:"text",name:"type",value:u.type,onChange:p,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",placeholder:"e.g., PROCESS, TECHNOLOGY, SERVICE, DATA",required:!0}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Use uppercase for type identifiers (e.g., PROCESS, TECHNOLOGY)"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-gray-300 mb-2",children:"Description"}),(0,a.jsx)("textarea",{name:"description",value:u.description,onChange:p,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",rows:3})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex space-x-3",children:[(0,a.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded text-white ".concat(d?"bg-blue-700":"bg-blue-600 hover:bg-blue-700"),children:d?"Saving...":t?"Update Field Type":"Create Field Type"}),(0,a.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]})}},3999:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(7876),s=r(4232),n=r(9099),i=r(5261);function l(e){return function(t){let r=(0,n.useRouter)(),[l,c]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){r.push("/admin/login");return}if(!await (0,i.uu)()){localStorage.removeItem("isAdmin"),r.push("/admin/login");return}c(!1)}catch(e){console.error("Auth check error:",e),r.push("/admin/login")}})()},[r]),l)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,a.jsx)(e,{...t})}}},4700:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/fieldTypes/new",function(){return r(6162)}])},5261:(e,t,r)=>{"use strict";r.d(t,{jL:()=>i,uu:()=>n,wR:()=>s}),r(3426),r(5611);var a=r(5364);async function s(){try{return(await fetch("/_api/web/currentuser",{method:"GET",headers:{Accept:"application/json;odata=verbose"},credentials:"include"})).ok}catch(e){return console.error("Authentication check failed:",e),!1}}async function n(){try{let{clientDataService:e}=await Promise.resolve().then(r.bind(r,5611));return await e.isCurrentUserAdmin()}catch(e){return console.error("Admin check failed:",e),!1}}function i(){let e=encodeURIComponent(window.location.href);window.location.href="/_layouts/15/authenticate.aspx?Source=".concat(e)}r(8220).Buffer,a.env.JWT_SECRET},6162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(7876);r(4232);var s=r(9099),n=r(1730),i=r(8230),l=r.n(i);let c=(0,r(3999).A)(()=>{let e=(0,s.useRouter)();return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Create New Field Type"}),(0,a.jsx)(l(),{href:"/admin",children:(0,a.jsx)("button",{className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded transition-colors",children:"Back to Dashboard"})})]}),(0,a.jsx)(n.A,{onCancel:()=>{e.push("/admin")}})]})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[513,230,208,848,611,636,593,792],()=>t(4700)),_N_E=e.O()}]);
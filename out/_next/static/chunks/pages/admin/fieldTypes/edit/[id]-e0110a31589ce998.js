(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1084],{1068:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/fieldTypes/edit/[id]",function(){return a(3294)}])},1730:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(7876),i=a(4232),s=a(9099),n=a(5611),l=a(9848);let c=e=>{let{initialData:t,onCancel:a}=e,c=(0,s.useRouter)(),[d,o]=(0,i.useState)(!1),[u,p]=(0,i.useState)({name:(null==t?void 0:t.name)||"",type:(null==t?void 0:t.type)||"",description:(null==t?void 0:t.description)||""}),h=e=>{let{name:t,value:a}=e.target;p(e=>({...e,[t]:a}))},m=async e=>{e.preventDefault(),o(!0);try{t?(await n.clientDataService.updateFieldType(t.id,u),l.oR.success("Field type updated successfully")):(await n.clientDataService.createFieldType(u),l.oR.success("Field type created successfully")),c.push("/admin")}catch(e){console.error("Error saving field type:",e),l.oR.error(t?"Failed to update field type":"Failed to create field type")}finally{o(!1)}};return(0,r.jsxs)("form",{onSubmit:m,className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-2",children:"Name"}),(0,r.jsx)("input",{type:"text",name:"name",value:u.name,onChange:h,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-2",children:"Type"}),(0,r.jsx)("input",{type:"text",name:"type",value:u.type,onChange:h,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",placeholder:"e.g., PROCESS, TECHNOLOGY, SERVICE, DATA",required:!0}),(0,r.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Use uppercase for type identifiers (e.g., PROCESS, TECHNOLOGY)"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-2",children:"Description"}),(0,r.jsx)("textarea",{name:"description",value:u.description,onChange:h,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",rows:3})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex space-x-3",children:[(0,r.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded text-white ".concat(d?"bg-blue-700":"bg-blue-600 hover:bg-blue-700"),children:d?"Saving...":t?"Update Field Type":"Create Field Type"}),(0,r.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]})}},3294:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(7876),i=a(4232),s=a(9099),n=a(1730),l=a(5611),c=a(9848);let d=(0,a(3999).A)(()=>{let e=(0,s.useRouter)(),{id:t}=e.query,[a,d]=(0,i.useState)(null),[o,u]=(0,i.useState)(!0),p=(0,i.useCallback)(async t=>{try{u(!0);let a=await l.clientDataService.getFieldTypeById(t);a?d(a):(c.oR.error("Field type not found"),e.push("/admin"))}catch(t){console.error("Error fetching field type:",t),c.oR.error("Failed to load field type"),e.push("/admin")}finally{u(!1)}},[e]);return((0,i.useEffect)(()=>{t&&"string"==typeof t&&p(t)},[t,p]),o)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Edit Field Type"}),a&&(0,r.jsx)(n.A,{initialData:a,onCancel:()=>{e.push("/admin")}})]})})})},3999:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(7876),i=a(4232),s=a(9099),n=a(5261);function l(e){return function(t){let a=(0,s.useRouter)(),[l,c]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){a.push("/admin/login");return}if(!await (0,n.uu)()){localStorage.removeItem("isAdmin"),a.push("/admin/login");return}c(!1)}catch(e){console.error("Auth check error:",e),a.push("/admin/login")}})()},[a]),l)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,r.jsx)(e,{...t})}}},5261:(e,t,a)=>{"use strict";a.d(t,{jL:()=>n,uu:()=>s,wR:()=>i}),a(3426),a(5611);var r=a(5364);async function i(){try{return(await fetch("/_api/web/currentuser",{method:"GET",headers:{Accept:"application/json;odata=verbose"},credentials:"include"})).ok}catch(e){return console.error("Authentication check failed:",e),!1}}async function s(){try{let{clientDataService:e}=await Promise.resolve().then(a.bind(a,5611));return await e.isCurrentUserAdmin()}catch(e){return console.error("Admin check failed:",e),!1}}function n(){let e=encodeURIComponent(window.location.href);window.location.href="/_layouts/15/authenticate.aspx?Source=".concat(e)}a(8220).Buffer,r.env.JWT_SECRET}},e=>{var t=t=>e(e.s=t);e.O(0,[8513,4208,9848,5611,636,6593,8792],()=>t(1068)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3671],{2654:(e,r,a)=>{"use strict";a.d(r,{A:()=>u});var t=a(7876),s=a(4232),l=a(5611),n=a(1492);let i=Object.keys(n).filter(e=>"function"==typeof n[e]),o={general:["AddRegular","ArrowDownRegular","ArrowLeftRegular","ArrowRightRegular","ArrowUpRegular","CheckmarkRegular","DismissRegular","HomeRegular","InfoRegular","MoreHorizontalRegular"],communication:["CallRegular","ChatRegular","EmailRegular","MeetNowRegular","PersonRegular","TeamRegular"],document:["DocumentRegular","FolderRegular","FolderOpenRegular","NoteRegular","PasteRegular"],business:["BuildingRegular","CalendarRegular","ChartRegular","MoneyRegular","TaskListRegular"],technology:["CodeRegular","DatabaseRegular","DeviceRegular","LaptopRegular","ServerRegular"]},c=e=>{let{value:r,onChange:a}=e,[l,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(!1),g=l?i.filter(e=>e.toLowerCase().includes(l.toLowerCase())):i,m=e=>{let r=n[e];return r&&"function"==typeof r?(0,t.jsx)(r,{className:"text-white",fontSize:20}):(0,t.jsx)("span",{children:"?"})};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-2 border border-gray-600 rounded cursor-pointer",onClick:()=>u(!d),children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-700 rounded flex items-center justify-center",children:(()=>{if(!r||!i.includes(r))return(0,t.jsx)("span",{className:"text-gray-400",children:"Select an icon"});let e=n[r];return e&&"function"==typeof e?(0,t.jsx)(e,{className:"text-white",fontSize:20}):(0,t.jsx)("span",{className:"text-gray-400",children:"Select an icon"})})()}),(0,t.jsx)("span",{children:r||"Select an icon"})]}),d&&(0,t.jsxs)("div",{className:"absolute z-50 mt-1 w-96 bg-gray-800 border border-gray-600 rounded shadow-lg p-4",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search icons...",className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",value:l,onChange:e=>c(e.target.value)})}),l?(0,t.jsx)("div",{className:"grid grid-cols-6 gap-2 max-h-60 overflow-y-auto",children:g.map(e=>(0,t.jsx)("div",{className:"p-2 rounded cursor-pointer hover:bg-gray-700 flex items-center justify-center ".concat(r===e?"bg-blue-600":""),onClick:()=>{a(e),u(!1)},title:e,children:m(e)},e))}):(0,t.jsx)("div",{className:"max-h-60 overflow-y-auto",children:Object.entries(o).map(e=>{let[s,l]=e;return(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-white font-medium mb-2 capitalize",children:s}),(0,t.jsx)("div",{className:"grid grid-cols-6 gap-2",children:l.map(e=>(0,t.jsx)("div",{className:"p-2 rounded cursor-pointer hover:bg-gray-700 flex items-center justify-center ".concat(r===e?"bg-blue-600":""),onClick:()=>{a(e),u(!1)},title:e,children:m(e)},e))})]},s)})})]})]})},d=e=>{let{value:r,onChange:a}=e,[l,n]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-2 border border-gray-600 rounded cursor-pointer",onClick:()=>n(!l),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded",style:{backgroundColor:r}}),(0,t.jsx)("span",{children:r})]}),l&&(0,t.jsxs)("div",{className:"absolute z-50 mt-1 bg-gray-800 border border-gray-600 rounded shadow-lg p-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["#4299e1","#9f7aea","#f56565","#48bb78","#ed8936","#ecc94b","#38b2ac","#f687b3","#a0aec0"].map(e=>(0,t.jsx)("div",{className:"w-8 h-8 rounded cursor-pointer border border-gray-600",style:{backgroundColor:e},onClick:()=>{a(e),n(!1)}},e))}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Custom Color"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"color",value:r,onChange:e=>a(e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 p-0 bg-transparent"}),(0,t.jsx)("input",{type:"text",value:r,onChange:e=>a(e.target.value),className:"flex-1 p-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"#RRGGBB",pattern:"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"})]})]}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)("button",{type:"button",className:"px-3 py-1 bg-gray-700 rounded hover:bg-gray-600 text-sm",onClick:()=>n(!1),children:"Close"})})]})]})},u=e=>{let{category:r,onSave:a,onCancel:n}=e,[i,o]=(0,s.useState)((null==r?void 0:r.name)||""),[u,g]=(0,s.useState)((null==r?void 0:r.color)||"#4299e1"),[m,h]=(0,s.useState)((null==r?void 0:r.icon)||""),[x,b]=(0,s.useState)(!1),[p,y]=(0,s.useState)(""),f=async e=>{if(e.preventDefault(),!i.trim()){y("Category name is required");return}b(!0),y("");try{(null==r?void 0:r.id)?await l.clientDataService.updateCategory(r.id,{name:i,color:u,icon:m}):await l.clientDataService.createCategory({name:i,color:u,icon:m}),a()}catch(e){console.error("Error saving category:",e),y("Failed to save category. Please try again.")}finally{b(!1)}};return(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:r?"Edit Category":"Add New Category"}),p&&(0,t.jsx)("div",{className:"bg-red-900 text-white p-2 rounded",children:p}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Category Name"}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",placeholder:"Enter category name",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Color"}),(0,t.jsx)(d,{value:u,onChange:g})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Icon"}),(0,t.jsx)(c,{value:m,onChange:h})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-700 rounded hover:bg-gray-600",disabled:x,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-500",disabled:x,children:x?"Saving...":"Save Category"})]})]})}},3999:(e,r,a)=>{"use strict";a.d(r,{A:()=>i});var t=a(7876),s=a(4232),l=a(9099),n=a(5261);function i(e){return function(r){let a=(0,l.useRouter)(),[i,o]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){a.push("/admin/login");return}if(!await (0,n.uu)()){localStorage.removeItem("isAdmin"),a.push("/admin/login");return}o(!1)}catch(e){console.error("Auth check error:",e),a.push("/admin/login")}})()},[a]),i)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,t.jsx)(e,{...r})}}},5261:(e,r,a)=>{"use strict";a.d(r,{jL:()=>n,uu:()=>l,wR:()=>s}),a(3426),a(5611);var t=a(5364);async function s(){try{return(await fetch("/_api/web/currentuser",{method:"GET",headers:{Accept:"application/json;odata=verbose"},credentials:"include"})).ok}catch(e){return console.error("Authentication check failed:",e),!1}}async function l(){try{let{clientDataService:e}=await Promise.resolve().then(a.bind(a,5611));return await e.isCurrentUserAdmin()}catch(e){return console.error("Admin check failed:",e),!1}}function n(){let e=encodeURIComponent(window.location.href);window.location.href="/_layouts/15/authenticate.aspx?Source=".concat(e)}a(8220).Buffer,t.env.JWT_SECRET},8470:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/categories/edit/[id]",function(){return a(9757)}])},9757:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c});var t=a(7876),s=a(4232),l=a(9099),n=a(2654),i=a(5611),o=a(9848);let c=(0,a(3999).A)(()=>{let e=(0,l.useRouter)(),{id:r}=e.query,[a,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),g=(0,s.useCallback)(async r=>{try{u(!0);let a=await i.clientDataService.getCategoryById(r);a?c(a):(o.oR.error("Category not found"),e.push("/admin"))}catch(r){console.error("Error fetching category:",r),o.oR.error("Failed to load category"),e.push("/admin")}finally{u(!1)}},[e]);return((0,s.useEffect)(()=>{r&&"string"==typeof r&&g(r)},[r,g]),d)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Edit Category"}),a&&(0,t.jsx)(n.A,{category:a,onSave:()=>e.push("/admin"),onCancel:()=>{e.push("/admin")}})]})})})}},e=>{var r=r=>e(e.s=r);e.O(0,[8513,8616,8354,9630,8974,8292,8588,3350,1150,5212,5458,5809,8167,4966,1952,1481,8777,2984,68,4592,6975,7083,9002,9039,1471,5502,4208,5501,5611,636,6593,8792],()=>r(8470)),_N_E=e.O()}]);
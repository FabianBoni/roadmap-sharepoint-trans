(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6309],{1565:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(8998)}])},3999:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(7876),a=s(4232),n=s(9099),i=s(5261),c=s(4132);function l(e){return function(t){let s=(0,n.useRouter)(),[l,d]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){s.push("/admin/login");return}if(!await (0,i.uu)()){localStorage.removeItem("isAdmin"),s.push("/admin/login");return}d(!1)}catch(e){console.error("Auth check error:",e),s.push("/admin/login")}})()},[s]),l)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,r.jsx)(c.A,{size:"large"})}):(0,r.jsx)(e,{...t})}}},4132:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(7876),a=s(4232);let n=e=>{let{size:t="medium",className:s="",minDuration:n=2e3,persistent:i=!1}=e,[c,l]=(0,a.useState)(!0),[d,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setTimeout(()=>{o(!0)},1e3),t=setTimeout(()=>{i||l(!1)},n);return()=>{clearTimeout(e),clearTimeout(t)}},[n,i]);let x={small:{fontSize:"2rem",width:"6ch",simpleSize:"1.5rem"},medium:{fontSize:"4rem",width:"6ch",simpleSize:"3rem"},large:{fontSize:"6rem",width:"6ch",simpleSize:"4.5rem"}}[t];return c||i?d?(0,r.jsxs)("div",{className:"flex justify-center items-center ".concat(s),children:[(0,r.jsxs)("div",{className:"inline-block font-mono font-bold whitespace-nowrap overflow-hidden border-r border-white",style:{fontSize:x.fontSize,width:x.width,animation:"\n            typing 6s steps(6) infinite,\n            blink 1.5s step-end infinite\n          "},children:[(0,r.jsx)("span",{style:{color:"#ffffff"},children:"JS"}),(0,r.jsx)("span",{style:{color:"#f5c000"},children:"Do"}),(0,r.jsx)("span",{style:{color:"#00bfff"},children:"IT"})]}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes typing {\n            0%, 85%, 100% { width: 0ch; }\n            15%, 75% { width: 6ch; }\n          }\n          @keyframes blink {\n            50% { border-color: transparent; }\n          }\n        "}})]}):(0,r.jsxs)("div",{className:"flex justify-center items-center ".concat(s),children:[(0,r.jsxs)("div",{className:"inline-block font-mono font-bold",style:{fontSize:x.simpleSize,animation:"pulse 1s ease-in-out infinite"},children:[(0,r.jsx)("span",{style:{color:"#ffffff"},children:"JS"}),(0,r.jsx)("span",{style:{color:"#f5c000"},children:"Do"}),(0,r.jsx)("span",{style:{color:"#00bfff"},children:"IT"})]}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n            @keyframes pulse {\n              0%, 100% { opacity: 0.6; transform: scale(1); }\n              50% { opacity: 1; transform: scale(1.05); }\n            }\n          "}})]}):null}},5261:(e,t,s)=>{"use strict";s.d(t,{jL:()=>i,uu:()=>n,wR:()=>a}),s(3426),s(5611);var r=s(5364);async function a(){try{return(await fetch("/_api/web/currentuser",{method:"GET",headers:{Accept:"application/json;odata=verbose"},credentials:"include"})).ok}catch(e){return console.error("Authentication check failed:",e),!1}}async function n(){try{let{clientDataService:e}=await Promise.resolve().then(s.bind(s,5611));return await e.isCurrentUserAdmin()}catch(e){return console.error("Admin check failed:",e),!1}}function i(){let e=encodeURIComponent(window.location.href);window.location.href="/_layouts/15/authenticate.aspx?Source=".concat(e)}s(8220).Buffer,r.env.JWT_SECRET},8998:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(7876),a=s(4232),n=s(9099),i=s(8230),c=s.n(i),l=s(5611),d=s(5261),o=s(3999),x=s(4132);let h=(0,o.A)(()=>{let e=(0,n.useRouter)(),[t,s]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[u,p]=(0,a.useState)(!0),[g,y]=(0,a.useState)(null),[f,j]=(0,a.useState)(null),[b,w]=(0,a.useState)("projects"),[N,v]=(0,a.useState)(null),[k,S]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{p(!0),y(null);try{let e=await l.clientDataService.getAllProjects(),t=await l.clientDataService.getAllCategories(),r=await l.clientDataService.getAppSettings();m(r),s(e),o(t)}catch(e){console.error("Error fetching data:",e),y("Failed to load data")}finally{p(!1)}})()},[]),(0,a.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){e.push("/admin/login");return}await (0,d.uu)()||(localStorage.removeItem("isAdmin"),e.push("/admin/login"))}catch(t){console.error("Error checking admin access:",t),e.push("/admin/login")}})()},[e]);let A=t=>{e.push("/admin/projects/edit/".concat(t))},C=async e=>{if(confirm("Are you sure you want to delete this project?"))try{await l.clientDataService.deleteProject(e),s(t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting project:",e),y("Failed to delete project")}},E=t=>{e.push("/admin/categories/edit/".concat(t))},_=async e=>{if(f!==e){j(e);return}try{await l.clientDataService.deleteCategory(e),o(i.filter(t=>t.id!==e)),j(null)}catch(e){console.error("Error deleting category:",e),alert("Failed to delete category")}},T=e=>{let t=i.find(t=>t.id===e);return t?t.name:"Unknown"},z=e=>{switch(e){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"planned":default:return"bg-gray-500";case"paused":return"bg-yellow-500";case"cancelled":return"bg-red-500"}},I=e=>{switch(e){case"completed":return"Abgeschlossen";case"in-progress":return"In Bearbeitung";case"planned":return"Geplant";case"paused":return"Pausiert";case"cancelled":return"Abgebrochen";default:return"Unbekannt"}},D=e=>{v(e),S(e.value)},F=async()=>{if(N)try{let e={...N,value:k},t=await l.clientDataService.updateSetting(e);m(h.map(e=>e.id===t.id?t:e)),v(null),S("")}catch(e){console.error("Error updating setting:",e),alert("Failed to update setting")}},B=()=>{v(null),S("")};return u?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex items-center justify-center",children:(0,r.jsx)(x.A,{size:"large",minDuration:2e3})}):g?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center",children:[(0,r.jsx)("p",{className:"text-red-500 mb-4",children:g}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded",children:"Erneut versuchen"})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,r.jsx)("div",{className:"flex space-x-4",children:(0,r.jsx)(c(),{href:"/",children:(0,r.jsx)("button",{className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Zur\xfcck zu Roadmap"})})})]}),(0,r.jsxs)("div",{className:"flex border-b border-gray-700 mb-6",children:[(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("projects"===b?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>w("projects"),children:"Projekte"}),(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("categories"===b?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>w("categories"),children:"Kategorien"}),(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("settings"===b?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>w("settings"),children:"Einstellungen"})]}),"projects"===b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsx)("button",{onClick:()=>{e.push("/admin/projects/new")},className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded",children:"Neues Projekt"})}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Titel"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Kategorie"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Timeline"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,r.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:e.title})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-300",children:T(e.category)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[e.startQuarter," - ",e.endQuarter]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(z(e.status)," text-white"),children:I(e.status)})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>A(e.id),className:"text-blue-400 hover:text-blue-300 mr-4",children:"Bearbeiten"}),(0,r.jsx)("button",{onClick:()=>C(e.id),className:"".concat(f===e.id?"text-red-500":"text-red-400"," hover:text-red-300"),children:f===e.id?"Best\xe4tigen":"L\xf6schen"})]})]},e.id))})]})})]}),"categories"===b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsx)("button",{onClick:()=>{e.push("/admin/categories/new")},className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded",children:"Neue Kategorie"})}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Farbe"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Icon"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,r.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:i.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:e.name})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded mr-2",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:e.color})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-300",children:e.icon})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>E(e.id),className:"text-blue-400 hover:text-blue-300 mr-4",children:"Bearbeiten"}),(0,r.jsx)("button",{onClick:()=>_(e.id),className:"".concat(f===e.id?"text-red-500":"text-red-400"," hover:text-red-300"),children:f===e.id?"Best\xe4tigen":"L\xf6schen"})]})]},e.id))})]})})]}),"settings"===b&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Schl\xfcssel"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Wert"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Beschreibung"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,r.jsxs)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:[h.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:e.key})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:N&&N.id===e.id?(0,r.jsx)("input",{type:"text",value:k,onChange:e=>S(e.target.value),className:"bg-gray-700 text-white px-2 py-1 rounded w-full"}):(0,r.jsx)("div",{className:"text-sm text-gray-300",children:e.value})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-300",children:e.description||"-"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:N&&N.id===e.id?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:F,className:"text-green-400 hover:text-green-300 mr-4",children:"Speichern"}),(0,r.jsx)("button",{onClick:B,className:"text-gray-400 hover:text-gray-300",children:"Abbrechen"})]}):(0,r.jsx)("button",{onClick:()=>D(e),className:"text-blue-400 hover:text-blue-300",children:"Bearbeiten"})})]},e.id)),0===h.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-400",children:'Keine Einstellungen gefunden. Erstellen Sie die Einstellung "roadmapTitle" f\xfcr den Roadmap-Titel.'})})]})]})})})]})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[8513,8230,4208,5611,636,6593,8792],()=>t(1565)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6309],{1565:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(8998)}])},3999:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(7876),s=a(4232),i=a(9099),n=a(5261);function c(e){return function(t){let a=(0,i.useRouter)(),[c,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){a.push("/admin/login");return}if(!await (0,n.uu)()){localStorage.removeItem("isAdmin"),a.push("/admin/login");return}l(!1)}catch(e){console.error("Auth check error:",e),a.push("/admin/login")}})()},[a]),c)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,r.jsx)(e,{...t})}}},5261:(e,t,a)=>{"use strict";a.d(t,{jL:()=>n,uu:()=>i,wR:()=>s}),a(3426),a(5611);var r=a(5364);async function s(){try{return(await fetch("/_api/web/currentuser",{method:"GET",headers:{Accept:"application/json;odata=verbose"},credentials:"include"})).ok}catch(e){return console.error("Authentication check failed:",e),!1}}async function i(){try{let{clientDataService:e}=await Promise.resolve().then(a.bind(a,5611));return await e.isCurrentUserAdmin()}catch(e){return console.error("Admin check failed:",e),!1}}function n(){let e=encodeURIComponent(window.location.href);window.location.href="/_layouts/15/authenticate.aspx?Source=".concat(e)}a(8220).Buffer,r.env.JWT_SECRET},8998:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(7876),s=a(4232),i=a(9099),n=a(8230),c=a.n(n),l=a(5611),d=a(5261),o=a(3999),x=a(6815);let h=(0,o.A)(()=>{let e=(0,i.useRouter)(),[t,a]=(0,s.useState)([]),[n,o]=(0,s.useState)([]),[h,u]=(0,s.useState)([]),[m,p]=(0,s.useState)(!0),[g,y]=(0,s.useState)(null),[j,b]=(0,s.useState)(null),[w,f]=(0,s.useState)("projects"),[N,v]=(0,s.useState)(null),[k,S]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{p(!0),y(null);try{let e=await l.clientDataService.getAllProjects(),t=await l.clientDataService.getAllCategories(),r=await l.clientDataService.getAppSettings();u(r),a(e),o(t)}catch(e){console.error("Error fetching data:",e),y("Failed to load data")}finally{p(!1)}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){e.push("/admin/login");return}await (0,d.uu)()||(localStorage.removeItem("isAdmin"),e.push("/admin/login"))}catch(t){console.error("Error checking admin access:",t),e.push("/admin/login")}})()},[e]);let C=t=>{e.push("/admin/projects/edit/".concat(t))},A=async e=>{if(confirm("Are you sure you want to delete this project?"))try{await l.clientDataService.deleteProject(e),a(t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting project:",e),y("Failed to delete project")}},E=t=>{e.push("/admin/categories/edit/".concat(t))},_=async e=>{if(j!==e){b(e);return}try{await l.clientDataService.deleteCategory(e),o(n.filter(t=>t.id!==e)),b(null)}catch(e){console.error("Error deleting category:",e),alert("Failed to delete category")}},F=e=>{let t=n.find(t=>t.id===e);return t?t.name:"Unknown"},T=e=>{switch(e){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"planned":default:return"bg-gray-500";case"paused":return"bg-yellow-500";case"cancelled":return"bg-red-500"}},B=e=>{switch(e){case"completed":return"Abgeschlossen";case"in-progress":return"In Bearbeitung";case"planned":return"Geplant";case"paused":return"Pausiert";case"cancelled":return"Abgebrochen";default:return"Unbekannt"}},P=e=>{v(e),S(e.value)},D=async()=>{if(N)try{let e={...N,value:k},t=await l.clientDataService.updateSetting(e);u(h.map(e=>e.id===t.id?t:e)),v(null),S("")}catch(e){console.error("Error updating setting:",e),alert("Failed to update setting")}},I=()=>{v(null),S("")};return m?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex items-center justify-center",children:(0,r.jsx)(x.lM,{visible:!0,height:"80",width:"80",color:"#60a5fa",ariaLabel:"triangle-loading",wrapperStyle:{},wrapperClass:""})}):g?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center",children:[(0,r.jsx)("p",{className:"text-red-500 mb-4",children:g}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded",children:"Erneut versuchen"})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,r.jsx)("div",{className:"flex space-x-4",children:(0,r.jsx)(c(),{href:"/",children:(0,r.jsx)("button",{className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Zur\xfcck zu Roadmap"})})})]}),(0,r.jsxs)("div",{className:"flex border-b border-gray-700 mb-6",children:[(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("projects"===w?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>f("projects"),children:"Projekte"}),(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("categories"===w?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>f("categories"),children:"Kategorien"}),(0,r.jsx)("button",{className:"py-2 px-4 font-medium ".concat("settings"===w?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>f("settings"),children:"Einstellungen"})]}),"projects"===w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsx)("button",{onClick:()=>{e.push("/admin/projects/new")},className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded",children:"Neues Projekt"})}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Titel"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Kategorie"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Timeline"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,r.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:e.title})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-300",children:F(e.category)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[e.startQuarter," - ",e.endQuarter]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(T(e.status)," text-white"),children:B(e.status)})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>C(e.id),className:"text-blue-400 hover:text-blue-300 mr-4",children:"Bearbeiten"}),(0,r.jsx)("button",{onClick:()=>A(e.id),className:"".concat(j===e.id?"text-red-500":"text-red-400"," hover:text-red-300"),children:j===e.id?"Best\xe4tigen":"L\xf6schen"})]})]},e.id))})]})})]}),"categories"===w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsx)("button",{onClick:()=>{e.push("/admin/categories/new")},className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded",children:"Neue Kategorie"})}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Farbe"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Icon"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,r.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:n.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:e.name})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded mr-2",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:e.color})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-300",children:e.icon})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>E(e.id),className:"text-blue-400 hover:text-blue-300 mr-4",children:"Bearbeiten"}),(0,r.jsx)("button",{onClick:()=>_(e.id),className:"".concat(j===e.id?"text-red-500":"text-red-400"," hover:text-red-300"),children:j===e.id?"Best\xe4tigen":"L\xf6schen"})]})]},e.id))})]})})]}),"settings"===w&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Schl\xfcssel"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Wert"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Beschreibung"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,r.jsxs)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:[h.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:e.key})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:N&&N.id===e.id?(0,r.jsx)("input",{type:"text",value:k,onChange:e=>S(e.target.value),className:"bg-gray-700 text-white px-2 py-1 rounded w-full"}):(0,r.jsx)("div",{className:"text-sm text-gray-300",children:e.value})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-300",children:e.description||"-"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:N&&N.id===e.id?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:D,className:"text-green-400 hover:text-green-300 mr-4",children:"Speichern"}),(0,r.jsx)("button",{onClick:I,className:"text-gray-400 hover:text-gray-300",children:"Abbrechen"})]}):(0,r.jsx)("button",{onClick:()=>P(e),className:"text-blue-400 hover:text-blue-300",children:"Bearbeiten"})})]},e.id)),0===h.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-400",children:'Keine Einstellungen gefunden. Erstellen Sie die Einstellung "roadmapTitle" f\xfcr den Roadmap-Titel.'})})]})]})})})]})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[8513,1215,8230,4208,7232,5611,636,6593,8792],()=>t(1565)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{1565:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(8998)}])},3999:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(7876),a=r(4232),i=r(9099),n=r(5261);function c(e){return function(t){let r=(0,i.useRouter)(),[c,l]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){r.push("/admin/login");return}if(!await (0,n.uu)()){localStorage.removeItem("isAdmin"),r.push("/admin/login");return}l(!1)}catch(e){console.error("Auth check error:",e),r.push("/admin/login")}})()},[r]),c)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,s.jsx)(e,{...t})}}},5261:(e,t,r)=>{"use strict";r.d(t,{jL:()=>n,uu:()=>i,wR:()=>a}),r(3426),r(5611);var s=r(5364);async function a(){try{return(await fetch("/_api/web/currentuser",{method:"GET",headers:{Accept:"application/json;odata=verbose"},credentials:"include"})).ok}catch(e){return console.error("Authentication check failed:",e),!1}}async function i(){try{let{clientDataService:e}=await Promise.resolve().then(r.bind(r,5611));return await e.isCurrentUserAdmin()}catch(e){return console.error("Admin check failed:",e),!1}}function n(){let e=encodeURIComponent(window.location.href);window.location.href="/_layouts/15/authenticate.aspx?Source=".concat(e)}r(8220).Buffer,s.env.JWT_SECRET},8998:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(7876),a=r(4232),i=r(9099),n=r(8230),c=r.n(n),l=r(5611),d=r(5261);let o=(0,r(3999).A)(()=>{let e=(0,i.useRouter)(),[t,r]=(0,a.useState)([]),[n,o]=(0,a.useState)([]),[x,h]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(null),[f,b]=(0,a.useState)("projects");(0,a.useEffect)(()=>{(async()=>{u(!0),g(null);try{let e=await l.clientDataService.getAllProjects(),t=await l.clientDataService.getAllCategories(),s=await l.clientDataService.getAllFieldTypes();r(e),o(t),h(s.filter(e=>void 0!==e.id))}catch(e){console.error("Error fetching data:",e),g("Failed to load data")}finally{u(!1)}})()},[]),(0,a.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("isAdmin")){e.push("/admin/login");return}await (0,d.uu)()||(localStorage.removeItem("isAdmin"),e.push("/admin/login"))}catch(t){console.error("Error checking admin access:",t),e.push("/admin/login")}})()},[e]);let w=t=>{e.push("/admin/projects/edit/".concat(t))},N=async e=>{if(confirm("Are you sure you want to delete this project?"))try{await l.clientDataService.deleteProject(e),r(t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting project:",e),g("Failed to delete project")}},v=t=>{e.push("/admin/categories/edit/".concat(t))},k=async e=>{if(y!==e){j(e);return}try{await l.clientDataService.deleteCategory(e),o(n.filter(t=>t.id!==e)),j(null)}catch(e){console.error("Error deleting category:",e),alert("Failed to delete category")}},C=t=>{e.push("/admin/fieldTypes/edit/".concat(t))},S=async e=>{if(y!==e){j(e);return}try{await l.clientDataService.deleteFieldType(e),h(x.filter(t=>t.id!==e)),j(null)}catch(e){console.error("Error deleting field type:",e),alert("Failed to delete field type")}},A=e=>{let t=n.find(t=>t.id===e);return t?t.name:"Unknown"},E=e=>{switch(e){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";default:return"bg-gray-500"}},T=e=>{switch(e){case"completed":return"Abgeschlossen";case"in-progress":return"In Bearbeitung";case"planned":return"Geplant";default:return"Unbekannt"}},_=e=>{switch(e){case"PROCESS":return"bg-blue-500";case"TECHNOLOGY":return"bg-green-500";case"SERVICE":return"bg-purple-500";case"DATA":return"bg-yellow-500";default:return"bg-gray-500"}};return m?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex items-center justify-center",children:(0,s.jsx)("p",{children:"Lade Daten..."})}):p?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center",children:[(0,s.jsx)("p",{className:"text-red-500 mb-4",children:p}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded",children:"Erneut versuchen"})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,s.jsx)("div",{className:"flex space-x-4",children:(0,s.jsx)(c(),{href:"/",children:(0,s.jsx)("button",{className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Zur\xfcck zu Roadmap"})})})]}),(0,s.jsxs)("div",{className:"flex border-b border-gray-700 mb-6",children:[(0,s.jsx)("button",{className:"py-2 px-4 font-medium ".concat("projects"===f?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>b("projects"),children:"Projekte"}),(0,s.jsx)("button",{className:"py-2 px-4 font-medium ".concat("categories"===f?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>b("categories"),children:"Kategorien"}),(0,s.jsx)("button",{className:"py-2 px-4 font-medium ".concat("fieldTypes"===f?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"),onClick:()=>b("fieldTypes"),children:"Felder"})]}),"projects"===f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsx)("button",{onClick:()=>{e.push("/admin/projects/new")},className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded",children:"Neues Projekt"})}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Titel"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Kategorie"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Timeline"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,s.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:t.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-white",children:e.title})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:A(e.category)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[e.startQuarter," - ",e.endQuarter]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(E(e.status)," text-white"),children:T(e.status)})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>w(e.id),className:"text-blue-400 hover:text-blue-300 mr-4",children:"Bearbeiten"}),(0,s.jsx)("button",{onClick:()=>N(e.id),className:"".concat(y===e.id?"text-red-500":"text-red-400"," hover:text-red-300"),children:y===e.id?"Best\xe4tigen":"L\xf6schen"})]})]},e.id))})]})})]}),"categories"===f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsx)("button",{onClick:()=>{e.push("/admin/categories/new")},className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded",children:"Neue Kategorie"})}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Farbe"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Icon"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,s.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:n.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-white",children:e.name})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded mr-2",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:e.color})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:e.icon})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>v(e.id),className:"text-blue-400 hover:text-blue-300 mr-4",children:"Bearbeiten"}),(0,s.jsx)("button",{onClick:()=>k(e.id),className:"".concat(y===e.id?"text-red-500":"text-red-400"," hover:text-red-300"),children:y===e.id?"Best\xe4tigen":"L\xf6schen"})]})]},e.id))})]})})]}),"fieldTypes"===f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsx)("button",{onClick:()=>{e.push("/admin/fieldTypes/new")},className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded",children:"Neues Feld"})}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Typ"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Beschreibung"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,s.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:x.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-white",children:e.name})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(_(e.type)," text-white"),children:e.type})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:e.description})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>C(e.id),className:"text-blue-400 hover:text-blue-300 mr-4",children:"Bearbeiten"}),(0,s.jsx)("button",{onClick:()=>S(e.id),className:"".concat(y===e.id?"text-red-500":"text-red-400"," hover:text-red-300"),children:y===e.id?"Best\xe4tigen":"L\xf6schen"})]})]},e.id))})]})})]})]})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[513,230,208,611,636,593,792],()=>t(1565)),_N_E=e.O()}]);